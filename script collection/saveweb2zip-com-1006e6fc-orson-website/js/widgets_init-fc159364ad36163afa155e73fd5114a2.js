function replaceVideoByPoster(e){var t=$(e),n=t.attr("poster"),i=t.find("source").attr("src"),a=['<img class="orson-elastic-background" src="',n,'" data-background-video-url="',i,'" />'].join("");t.replaceWith(a)}function replacePosterByVideo(e){var t=$(e),n=t.data("background-video-url"),i=t.attr("src"),a=['<video class="orson-elastic-background" loop autoplay muted="true" poster="'+i+'">','<source src="'+n+'" type="video/mp4" />',"</video>"].join("");t.replaceWith(a)}function resizeBackgroundElements(){document.querySelectorAll(".orson-elastic-background");if($(window).width()>768){if(!inThemeEditor)for(var e=document.querySelectorAll("video.orson-elastic-background"),t=0,n=e.length;n>t;t++)e[t].hasAttribute("autoplay")||e[t].setAttribute("autoplay","autoplay"),"none"==e[t].getAttribute("preload")&&e[t].setAttribute("preload","auto");for(var i=document.querySelectorAll("img.orson-elastic-background"),t=0,n=i.length;n>t;t++)replacePosterByVideo(i[t])}else for(var e=document.querySelectorAll("video.orson-elastic-background"),t=0,n=e.length;n>t;t++)replaceVideoByPoster(e[t]);for(var a=document.querySelectorAll(".orson-elastic-background"),o=function(e){return"IMG"===e.nodeName&&e.hasAttribute("src")&&-1!==e.getAttribute("src").indexOf("vimeocdn")},t=0,n=a.length;n>t;t++)o(a[t])?resizeBackgroundElement(a[t],"fitOutside"):"VIDEO"===a[t].nodeName?resizeBackgroundElement(a[t],"fitOutside",!0):resizeBackgroundElement(a[t],"fitInside",!0)}function startCarousel(e){var t=e.querySelector(".orson-carousel")||e.querySelector("div.carousel[data-type]");t=jQuery(t);var n=t.data("type");switch(n){case"single":$("#"+t.attr("id")).carousel({easing:"ease-in-out"});break;case"multiple":setTimeout(function(){$("#"+t.attr("id")).elastislide({minItems:4})},100);break;case"grid":t.data("lightbox")&&t.find(".elastic-gallery").each(function(e){$(this).click(function(n){n.preventDefault(),n.stopPropagation(),openPhotoSwipe(e,t)})})}}function lazyLoadGoogleMaps(){for(var e=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){var n=t.target,i=n.querySelector("svg"),a=i.dataset.src,o=document.createElement("iframe");o.setAttribute("src",a),o.setAttribute("frameborder",0),i.classList.forEach(function(e){o.classList.add(e)}),o.classList.add("lz-load"),n.replaceChild(o,i),setTimeout(function(){o.classList.add("fade-in")},10),e.unobserve(n)}})},{rootMargin:"500px 0px"}),t=document.querySelectorAll(".gmapContainer.lazy-loaded"),n=0;n<t.length;n++)e.observe(t[n])}function matchingBracket(e){var t=parseInt(e,10),n=[[0,575],[576,767],[768,991],[992,1199],[1200,1919],[1920,2560]],i=n.filter(function(e){return t>=e[0]&&t<=e[1]})[0];return i}function resizeAdaptiveImages(e){var t=matchingBracket(e);if(e){var n=[].slice.call(document.querySelectorAll("img[data-container-size]"));if(e>720&&window.viewportSentinel){window.viewportSentinel=!1;for(var i={span12:940,span10:780,span8:620},a=0;a<n.length;a++){var o=n[a],r=o.getAttribute("src");if(/=w[0-9]+$/.test(r)){var s=r.replace(/=w[0-9]+$/,"");o.setAttribute("src",s+"=w"+i["span"+o.dataset.containerSize])}}}}return adaptiveBreakpoints[t[0]+""]?!0:(adaptiveBreakpoints[t[0]+""]=!0,void $(".mainContent section").each(function(){$(this).data("update_image")&&$(this).data("update_image")()}))}function getBestAvailableFit(e,t){var n=getBestSizeFit(e),i={name:"size_6",width:140};if("undefined"!=typeof n&&t.hasOwnProperty(n.name))i=n;else{var a=[{name:"size_2",width:1280},{name:"size_3",width:960},{name:"size_4",width:620},{name:"size_5",width:300},{name:"size_6",width:140}];i=a.filter(function(e){return t.hasOwnProperty(e.name)})[0]}return i}function openPhotoSwipe(e,t){var n=document.querySelectorAll(".pswp")[0],i=$(window).width(),a=t.attr("id").replace("carousel-",""),o=window["slideData"+a].map(function(e){var t=getBestAvailableFit(i,e.urls);return{src:e.urls[t.name],w:t.width,h:t.width/(e.width/e.height),title:"<h4>"+e.description+"</h4>"}}),r={history:!1,focus:!1,index:e},s=new PhotoSwipe(n,PhotoSwipeUI_Default,o,r);s.init()}function scrollRevealStart(){"undefined"!=typeof sr&&sr.isSupported()&&($(".mainContent .bgSection:nth-of-type(1) .container .widgetContainer").addClass("data-sr"),$(".mainContent .bgSection:nth-of-type(2) .container .widgetContainer").addClass("data-sr"),$(".mainContent .bgSection:nth-of-type(3) .container .widgetContainer").addClass("data-sr"),sr.reveal(".data-sr",{duration:500,move:"0px",useDelay:"once",scale:1},40))}function scrollDestroy(){"undefined"!=typeof sr&&sr.isSupported()&&($(".mainContent .bgSection:nth-of-type(1) .container .widgetContainer").removeAttr("style").removeAttr("data-sr-id"),$(".mainContent .bgSection:nth-of-type(2) .container .widgetContainer").removeAttr("style").removeAttr("data-sr-id"),$(".mainContent .bgSection:nth-of-type(3) .container .widgetContainer").removeAttr("style").removeAttr("data-sr-id"),sr.destroy())}function lazyLoadingHandler(e,t){return e?!1:void handleLazyLoadedElements(t).then(function(e){e&&startCarousel(e)})}function handleLazyLoadedElements(e){return new Promise(function(t){var n=e.placeholders,i=e.container;n.forEach(function(e){var t=e.element,n=(t.dataset.containerSize,new Image);n.setAttribute("src",e.url);var i=["elasticCrop","width","height","parentContainer","bestAvailable","containerSize"];if(i.forEach(function(e){t.dataset[e]&&(n.dataset[e]=t.dataset[e])}),n.classList.add("lz-load"),"logo"===t.dataset.type){var a={size_1:256,size_2:128,size_3:96,size_4:76,size_5:64,size_6:48};n.height=a[t.dataset.size],n.style.height=""+a[t.dataset.size]+"px",n.style.objectFit="contain"}e.element.parentElement.replaceChild(n,e.element),setTimeout(function(){n.classList.add("fade-in")},10)}),i.classList.contains("carouselContainer")?("multiple"!==i.dataset.subtype&&setTimeout(function(){initElasticCarousel('.carouselContainer[data-stamp="'+i.dataset.stamp+'"]')},20),t(i)):t(!1)})}function lazyLoad(e){for(var t={images:"div.imageContainer",logos:"div.logoContainer",carousels:"div.carouselContainer"},n=0;n<e.length;n++)for(var i=e[n],a=document.querySelectorAll(t[i]),o=0;o<a.length;o++){var r=a[o];lazyLoader.watch(r,lazyLoadingHandler)}}function alignMobileButton(){var e=document.querySelectorAll(".menuContainer .navbar-inner");window.menuCollapsedArray={},"undefined"!=typeof e&&e.forEach(function(e,t){menuCollapsedArray[t]=!1;var n=e.querySelector("button[data-toggle=collapse]"),i=n.getBoundingClientRect().height;n.style.margin=0,e.querySelector(".nav-collapse").style.padding=0;var a=e.getBoundingClientRect().height;n.style.margin=(a-i)/2+"px 0 0 0";var o=function(){if(window.innerWidth<980){var t=e.querySelector(".nav-collapse");if(t.classList.contains("in"))var o=t.getBoundingClientRect().height;n.style.margin=0,t.style.padding=0,a=e.getBoundingClientRect().height,i=n.getBoundingClientRect().height,n.style.margin=(a-i-(o||0))/2+"px 0 0 0"}};window.addEventListener("resize",o),setTimeout(o,1e3)})}function loadMenu(){var e=$(".navbarCarousel");e.each(function(){var e=$(this).children();$("#"+e.attr("id")).elastislide({minItems:4})}),$(".menuContainer").find("a").each(function(){var t=$(this);t.hasClass("projectButton")||t.click(function(){t.hasClass("dropdown-toggle")||"_blank"==t.attr("target")||e.length>0&&e.each(function(e,t){$(t).hasClass("projectShow")&&$(t).animate({height:"0px"},1e3,function(){$(t).removeClass("projectShow").addClass("projectHide")})})})}),$(".projectButton").click(function(e){if(e.preventDefault(),!t){var t=!1,n=function(e){var n,i=e,a=i.data("index"),o=i.closest(".menuContainer").find(".navbarCarousel");o.each(function(){$(this).data("index")==a&&(n=$(this))}),t=!0,n.animate({height:n.find(".elastislide-list").height()+20},1e3,function(){n.removeClass("projectHide").addClass("projectShow"),i.parent().addClass("active"),t=!1})},i=$(this),a=(i.data("index"),i.closest(".menuContainer").find(".navbarCarousel"));a.hasClass("projectShow")?(a.css("overflow","hidden"),a.each(function(){$(this).hasClass("projectShow")&&(t=!0,$(this).animate({height:"0px"},1e3,function(){t=!1,a.removeClass("projectShow").addClass("projectHide"),i.closest(".menuContainer").find(".projectButton").parent().removeClass("active"),$(this).data("index")!=i.data("index")&&n(i)}))})):n(i)}}),$(".brand-text").length&&OrsonTextResize.init($(".brand-text"))}function loadFacebookScript(){var e=0;"undefined"==typeof FB&&0==e?(e=1,function(e,t,n){var i,a=e.getElementsByTagName(t)[0];e.getElementById(n)||(i=e.createElement(t),i.id=n,i.src="//connect.facebook.net/"+_local+"/sdk.js#xfbml=1&appId=466079946792352&version=v2.0",a.parentNode.insertBefore(i,a))}(document,"script","facebook-jssdk")):FB.XFBML.parse()}function loadTwitterScript(){var e=0;"undefined"==typeof twttr&&0==e?(e=1,function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//platform.twitter.com/widgets.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()):$.ajax({url:"//platform.twitter.com/widgets.js",dataType:"script",cache:!0})}function fitElement(e,t){e&&e.dataset&&"true"===e.dataset.elasticCrop&&(t="fitOutside"),resizeBackgroundElement(e,t,!0)}function initElasticCarousel(e){var t=document.querySelectorAll(e+" img"),n="fitInside",i=null;window.addEventListener("resize",function(){var t=$(window).width();t!==i&&(initElasticCarousel(e),i=t)});for(var a=0;a<t.length;a++)fitElement(t[a],n)}function startCarousel(e){var t=e.querySelector(".orson-carousel")||e.querySelector("div.carousel[data-type]");t=jQuery(t);var n=t.data("type");switch(n){case"single":$("#"+t.attr("id")).carousel({easing:"ease-in-out"});break;case"multiple":setTimeout(function(){$("#"+t.attr("id")).elastislide({minItems:4})},100);break;case"grid":t.data("lightbox")&&t.find(".elastic-gallery").each(function(e){$(this).click(function(n){n.preventDefault(),n.stopPropagation(),openPhotoSwipe(e,t)})})}}function initPlugins(){if(null!=sitePlugins&&(sitePlugins.bootstrap&&sitePlugins.bootstrap.fixHeader&&setTimeout(function(){fixHeader.start()},0),sitePlugins.plugins&&sitePlugins.plugins.scrollReveal&&scrollRevealStart()),$(".parallax").each(function(){Parallax.backgroundResize($(this)),Parallax.init($(this))}),inThemeEditor||numberOfVideos>0){resizeBackgroundElements();var e=null;$(window).resize(function(){var t=$(window).width()+$(window).height();t!==e&&(resizeBackgroundElements(),e=t)})}$(".twitter-timeline").length&&loadTwitterScript(),$(".fb-page").length&&loadFacebookScript(),$(".countdownContainer").each(function(){var e=$(this).children(),t=new Date(e.data("date")).getTime()/1e3-(new Date).getTime()/1e3;0>t&&(t=0),$("#"+e.attr("id")).FlipClock(t,{clockFace:"DailyCounter",countdown:!0,language:_local})})}function ignoreClick(){$(".or-no-click").on("click",function(e){e.preventDefault()})}function shouldResize(e){for(var t=e,n=["span8","span10","span12"],i=function(e){return/span[1-9]{1,2}/.test(e.trim())},a=function(e){return-1!==n.indexOf(e.trim())},o=function(e){return!a(e)};t=t.parentNode;){var r=[].slice.call(t.classList),s=r.filter(i);if(s.length>0&&s.every(o))return null;if(s.length>0&&s.some(a))return s.filter(a)[0]}}var adaptiveBreakpoints=function(){var e=[576,768,992,1200,1920],t=window.innerWidth;return e.reduce(function(e,n){return e[n+""]=t>n,e},{})}(),fixHeader={start:function(){var e=function(e){if(979>e)fixHeader.stop();else{var t=$("header").height();$("body").addClass("fixedTop"),$("body").css("padding-top",t),$("header").addClass("navbar-fixed-top")}},t=document.documentElement.clientWidth;e(t),$(window).resize(function(){var t=$(window).width();t!==cachedWindowWidth&&(e(document.documentElement.clientWidth),window.cachedWindowWidth=t)})},stop:function(){$("body").removeClass("fixedTop").css("padding-top",0),$("header").removeClass("navbar-fixed-top"),$("body").removeClass("fixedTop")}},_local=$("html").attr("lang"),inThemeEditor=window.self!==window.top&&!/preview\?version_id=[0-9a-f]{24}$/.test(window.location.href),numberOfVideos=$("video").length,fixHeader={start:function(){var e=function(e){if(979>e)fixHeader.stop();else{var t=$("header").height();$("body").addClass("fixedTop"),$("body").css("padding-top",t),$("header").addClass("navbar-fixed-top")}},t=document.documentElement.clientWidth;e(t);var n=null;$(window).resize(function(){var t=$(window).width();t!==n&&(e(document.documentElement.clientWidth),n=t)})},stop:function(){$("body").removeClass("fixedTop").css("padding-top",0),$("header").removeClass("navbar-fixed-top"),$("body").removeClass("fixedTop")}};window.addEventListener("orientationchange",function(){resizeAdaptiveImages(window.innerWidth)});var last_window_width_for_resizeAdaptiveImages=null;window.addEventListener("resize",function(){var e=$(window).width();e!==last_window_width_for_resizeAdaptiveImages&&(resizeAdaptiveImages(window.innerWidth),last_window_width_for_resizeAdaptiveImages=e)},!1),ignoreClick();var ROOT_MARGIN="300px 0px",lazyLoader=new LazyLoader({rootMargin:ROOT_MARGIN});document.addEventListener("DOMContentLoaded",function(){for(var e=[].slice.call(document.querySelectorAll("svg[data-url]")),t=0;t<e.length;t++){var n=e[t],i=shouldResize(n);i&&(n.dataset.containerSize=i.replace(/^span/,""))}}),$(window).on("load",function(){function e(){var e={"background-position":"top center","background-repeat":"no-repeat","-webkit-background-size":"cover","-o-background-size":"cover","moz-background-size":"cover","background-size":"cover"};$("section.bgSection.lazy-loaded").each(function(){var t=this;if(t.dataset.url&&""!==t.dataset.url){var n=function(t,n){t?console.error(t):(e["background-image"]="url("+n.pictures[0].url+")",jQuery(n.container).css(e))};lazyLoader.watch(t,n),$(t).data("update_image",function(){lazyLoader.lazyLoad(t).then(function(e){n(null,e)})["catch"](function(e){n(e)})});var i=$(t).height(),a=new Date,o=setInterval(function(){$(t).height()!=i&&(i=$(t).height(),$(t).data("update_image")()),new Date-a>1e4&&clearInterval(o)},500)}})}function t(){for(var e={rootMargin:"500px 0px"},t=function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target,i=t.querySelector("svg"),a=i.dataset.src,o=document.createElement("iframe"),r={src:a,frameborder:0,allowfullscreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0};Object.keys(r).forEach(function(e){o.setAttribute(e,r[e])}),i.classList.forEach(function(e){o.classList.add(e)}),o.classList.add("lz-load");var s=t.querySelector("."+i.dataset.provider);s.replaceChild(o,i),setTimeout(function(){o.classList.add("fade-in")},10),n.unobserve(t)}})},n=new IntersectionObserver(t,e),i=document.querySelectorAll(".videoContainer"),a=0;a<i.length;a++)n.observe(i[a])}function n(e,t){e.data("elastic-crop")&&(t="fitOutside"),resizeBackgroundElement(e,t,!0)}try{if(window.lazyLoading={active:document.querySelector(".lazy-loaded")},window.viewportSentinel=window.innerWidth<720,null!=sitePlugins&&(sitePlugins.bootstrap&&sitePlugins.bootstrap.fixHeader&&setTimeout(function(){fixHeader.start()},0),sitePlugins.plugins&&sitePlugins.plugins.scrollReveal&&scrollRevealStart()),window.lazyLoading.active&&e(),window.lazyLoading.active&&(lazyLoadGoogleMaps(),$(".gmapContainer").each(function(){var e=$(this).children(),t=e.data("widget"),n=Math.floor(1e4*Math.random()+1);if(t&&"object"==typeof t){var i={};i[n]=t,$("#"+e.attr("id")).leafletMap("init",i[n])}})),window.lazyLoading.active)try{t()}catch(i){console.error("lasyLoadVideos failed",i)}if(window.lazyLoading.active&&lazyLoad(["images","logos","carousels"]),$("noscript.or-elastic-element-no-script-container").length>0){var a=function(e){$(e).find(".or-elastic-element");$("noscript.or-elastic-element-no-script-container").each(function(e,t){var i=$(t).parent(),a=jQuery(t.innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"));$(t).remove(),i.append(a);var o="fitInside";$(a).one("load",function(){n(a,o)}),$(window).resize(function(){n(a,o)})})};$(".carouselContainer").each(function(){var e=$(this).children();if("single"==e.data("type")){{$(e).find(".or-elastic-element")}$("noscript.or-elastic-element-no-script-container").each(function(t,i){var a=$(i).parent(),o=jQuery(i.innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"));if($(i).remove(),a.append(o),e.children().first().hasClass("elastic-gallery")){var r="fitInside";$(o).one("load",function(){n(o,r)}),$(window).resize(function(){n(o,r)})}else o.removeClass("or-elastic-element")}),$("#"+e.attr("id")).carousel()}else if("multiple"==e.data("type"))$("#"+e.attr("id")).elastislide({minItems:4});else{setTimeout(function(){a("#"+e.attr("id"))},500);var t=function(e,t){var n=function(e,t){var n=getBestSizeFit(e),i={name:"size_6",width:140};if("undefined"!=typeof n&&t.hasOwnProperty(n.name))i=n;else{var a=[{name:"size_2",width:1280},{name:"size_3",width:960},{name:"size_4",width:620},{name:"size_5",width:300},{name:"size_6",width:140}];i=a.filter(function(e){return t.hasOwnProperty(e.name)})[0]}return i},i=document.querySelectorAll(".pswp")[0],a=$(window).width(),o=t.attr("id").replace("carousel-",""),r=window["slideData"+o].map(function(e){var t=n(a,e.urls);return{src:e.urls[t.name],w:t.width,h:t.width/(e.width/e.height),title:"<h4>"+e.description+"</h4>"}}),s={history:!1,focus:!1,index:e},l=new PhotoSwipe(i,PhotoSwipeUI_Default,r,s);l.init()};e.data("lightbox")&&e.find(".elastic-gallery").each(function(n){$(this).click(function(i){i.preventDefault(),i.stopPropagation(),t(n,e)})})}})}navigator.userAgent.match(/bot|Insight|areboost/)||$("a[href*='.orson.io']").each(function(){$(this).attr("href").match(/^https?:\/\/..\.orson.io\/?$/)&&$(this).attr("href",$(this).attr("href").replace(/\/$/,"")+"/?utm_source=Client%20site&utm_medium=referral&utm_content=Link%20footer&utm_campaign=Client")})}catch(i){console.error("error in widget_inits",i)}});